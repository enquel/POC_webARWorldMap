<!DOCTYPE html>
<script src="js/aframe.min.js"></script>
<!-- include aframe-ar.js -->
<script src="js/aframe-ar.js"></script>

<style type="text/css">
	
#arjsDebugUIContainer 
{
   display: none; !important;
}
	
.a-enter-vr-button
{
   display: none; !important;		
}
</style>
<style>
        #play-button{
          position: fixed;
          top: calc(50% - 1em);
          left: calc(50% - 100px);
          width: 200px;
          height: 2em;
          z-index: 10;
        }
    </style>
<body style='margin : 0px; overflow: hidden; font-family: Monospace;'>


      <button id="play-button">Play Movie</button>
      
<a-scene embedded arjs='sourceType: webcam;'>
	<a-assets>
        <!-- Single source video. -->
        <video id="video" style="display:none" 
               autoplay="true" loop="true" crossorigin="anonymous" webkit-playsinline src="https://raw.githubusercontent.com/enquel/POC_webARWorldMap
/master/data/worldMapBlue.mp4">
        </video>
      </a-assets>
	<script>
        AFRAME.registerComponent('on-marker-found', 
	 {
            schema: {
                to: { default: 'true' }
            },
            init: function ()
            {
                //var data = this.data;		
                document.querySelector("a-marker-camera").addEventListener('marker-found', function ()
                {
                    this.setAttribute('visible', data.to);
                });
            }
        });
      </script>

		 <!--<a-sphere id ="thatSphere" position="0 0.5 0" radius="0.5" color="#EF2D5E"></a-sphere> -->
		<a-plane scale="0.4 0.4 0.4" position="0 0 0" opacity="0.01" rotation="-89.9 0 0" width="10" height="10" color="#7BC8A4">
	<a-video src="#video" autoplay="true" visible="true" width="16" height="9" position="0 0 5"></a-video>
	</a-plane>
		
	<!--
		<a-image position="0 0 0" rotation="90 180 0" height="1" width="1"  src="https://raw.githubusercontent.com/mattGraphics/randomfiles/master/red-dot.png"></a-image>
		
		<a-image position="0 0.2 0" rotation="270 0 0" height="1" width="1"  src="https://raw.githubusercontent.com/mattGraphics/randomfiles/master/matt-face.png"></a-image> 
		
		<a-image position="0 0.4 0" rotation="270 0 0" height="1" width="1"  src="https://raw.githubusercontent.com/mattGraphics/randomfiles/master/hello-you-text.png"></a-image> 
-->
	  
		  <a-marker-camera preset='custom' type='pattern' url='https://raw.githubusercontent.com/enquel/POC_webARWorldMap
/master/data/markerScanHere.patt'></a-marker-camera> 
		  
		  
	</a-scene>
	<script>
	 document.querySelector('#play-button').addEventListener("click", function(e)
    {
    startStuff();
    this.style.display = 'none';
    }, false);

    function startStuff(){
        var vid1 = document.querySelector('#video');
        vid1.play();
    }
	</script>
	<script>
		//if(document.querySelector("a-marker").object3D.visible == true)
		//{
		//	document.querySelector("video").setAttribute("visible",true);
		//}
		if(document.getElementById("#thatSphere").visible == true)
		{
			document.querySelector("video").setAttribute("visible",true);
		}
	</script>
	<script>
      var video = document.getElementById("video");
      video.addEventListener('ended', function (evt) 
      { 
        // ...
        //console.log("bacl");
          window.location.href = '../BankingForFood/index.html';
          this.style.display = 'none';
      });

      document.querySelector('#buttExitMovie').addEventListener("click", function(e)
      {
         console.log("buttExitMovie");
          window.location.href = '../BankingForFood/index.html';
          this.style.display = 'none';
      }, false);

   
</body>
</html>
